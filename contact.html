<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <meta name="description" content="Contact Vestibular Nexus — book a consult or ask about our Agile Tools Sanitation playbook." />
  <meta name="theme-color" content="#000000" />
  <link rel="apple-touch-icon" sizes="180x180" href="assets/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="assets/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="assets/favicon-16x16.png">
  <link rel="manifest" href="assets/site.webmanifest">
  <title>Contact – Vestibular Nexus</title>
  <link rel="stylesheet" href="styles/styles.css" />
</head>
<body>
  <!-- Reused site header / branding -->
  <header class="hero" role="banner">
    <div class="topbar" aria-hidden="false">
      <a href="/" class="brand" aria-label="Vestibular home">
        <img src="assets/vestibular_logo.svg" alt="Vestibular logo" class="brand-logo" />
      </a>
    </div>

    <div class="hero-content" aria-hidden="true">
      <h1>
        <span>Fix your tools.</span><br />
        <span>Free your team.</span><br />
        <span>Operationalize morale.</span>
      </h1>

      <p class="sr-only">Contact page — send us a message below and we'll get back to you about consults and playbook access.</p>
    </div>
  </header>

  <main>
    <section class="contact" aria-labelledby="contact-heading">
      <h2 id="contact-heading">Get in touch</h2>

      <p style="text-align:center; color:var(--body-text-color); max-width:700px; margin:0 auto 1rem;">
        Tell us about your team’s tooling challenge or request a free consult. Fields marked required are necessary for us to respond.
      </p>

      <form id="contact-form" method="POST" action="/contact" novalidate>
        <div class="form-group">
          <label for="name">Name <span aria-hidden="true">*</span></label>
          <input type="text" id="name" name="name" required aria-required="true" autocomplete="name" />
        </div>

        <div class="form-group">
          <label for="email">Email <span aria-hidden="true">*</span></label>
          <input type="email" id="email" name="email" required aria-required="true" autocomplete="email" />
        </div>

        <div class="form-group">
          <label for="subject">Subject</label>
          <input type="text" id="subject" name="subject" placeholder="Optional" />
        </div>

        <div class="form-group">
          <label for="message">Message <span aria-hidden="true">*</span></label>
          <textarea id="message" name="message" rows="6" required aria-required="true"></textarea>
        </div>

        <!-- Honeypot (visible to bots, hidden visually) -->
        <div class="hidden-visually" aria-hidden="true">
          <label for="website">Website</label>
          <input type="text" id="website" name="website" autocomplete="off" tabindex="-1" />
        </div>

        <div style="text-align:center; margin-top:1rem;">
          <button type="submit" class="btn" aria-label="Send message">Send message</button>
        </div>

        <div id="form-status" role="status" aria-live="polite" style="text-align:center; margin-top:12px;"></div>
      </form>
    </section>
  </main>

  <footer>
    <p>&copy; 2025 Vestibular. Built for clarity, scale, and morale.</p>
  </footer>

  <script>
    // Minimal client-side validation + fetch to /contact (graceful fallback to standard form POST)
    (function () {
      const form = document.getElementById('contact-form');
      const status = document.getElementById('form-status');

      function show(msg, ok = true) {
        status.textContent = msg;
        status.style.color = ok ? 'var(--accent-color)' : '#ff6b6b';
      }

      form.addEventListener('submit', async (e) => {
        // let default submit happen if fetch unsupported
        if (!window.fetch) return;

        e.preventDefault();
        status.textContent = '';

        const data = {
          name: form.name.value.trim(),
          email: form.email.value.trim(),
          subject: form.subject.value.trim(),
          message: form.message.value.trim(),
          website: form.website.value.trim()
        };

        // Client-side sanity checks
        if (!data.name || !data.email || !data.message) {
          show('Please complete required fields.', false);
          return;
        }

        // Basic email pattern
        const emailRe = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
        if (!emailRe.test(data.email)) {
          show('Please enter a valid email address.', false);
          return;
        }

        try {
          const resp = await fetch(form.action, {
            method: 'POST',
            headers: { 'Content-Type': 'application/json', 'Accept': 'application/json' },
            body: JSON.stringify(data),
            credentials: 'same-origin'
          });

          if (resp.ok) {
            form.reset();
            show('Message sent. We will reply within one business day.');
          } else {
            const text = await resp.text().catch(() => null);
            show(text || 'There was an error sending your message.', false);
          }
        } catch (err) {
          show('Network error — please try again later.', false);
          console.error(err);
        }
      });
    })();
  </script>
</body>
</html>
